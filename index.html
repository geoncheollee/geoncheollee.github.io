<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Mind Map with import</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
    }
    #map-container {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="map-container"></div>

  <script type="module">
    import MindElixir from './thirdpartylib/MindElixir.js';

    const mind = new MindElixir({
      el: '#map-container',
      direction: MindElixir.SIDE,
      draggable: true,
      contextMenu: true,
      toolBar: true,
      nodeMenu: true,
      keypress: true,
    });

    const data = {
      nodeData: {
        id: 'root',
        topic: '나 (Full Stack 개발자)',
        children: [
          {
            topic: '기술 스택 (Tech Stack)',
            id: 'tech',
            children: [
              {
                topic: 'Frontend',
                id: 'frontend',
                children: [
                  { topic: 'React', id: 'react' },
                  { topic: 'Vue.js', id: 'vue' },
                  { topic: 'HTML/CSS/jQuery', id: 'htmlcss' }
                ]
              },
              {
                topic: 'Backend',
                id: 'backend',
                children: [
                  { topic: 'Spring Boot', id: 'spring' },
                  { topic: 'Node.js', id: 'node' },
                  { topic: 'Java', id: 'java' }
                ]
              },
              {
                topic: 'Database',
                id: 'db',
                children: [
                  { topic: 'MySQL', id: 'mysql' },
                  { topic: 'MS-SQL', id: 'mssql' },
                  { topic: 'Oracle', id: 'oracle' },
                  { topic: 'Tibero', id: 'tibero' },
                  { topic: 'Redis', id: 'redis' }
                ]
              },
              {
                topic: 'DevOps / Infra',
                id: 'infra',
                children: [
                  { topic: 'AWS', id: 'aws' },
                  { topic: 'Jenkins', id: 'jenkins' },
                  { topic: 'Docker', id: 'docker' },
                  { topic: 'Nginx', id: 'nginx' },
                  { topic: 'Apache', id: 'apache' },
                  { topic: 'Tomcat', id: 'tomcat' },
                  { topic: 'Git', id: 'git' },
                  { topic: 'SVN', id: 'svn' }
                ]
              }
            ]
          },
          {
            topic: '프로젝트 경험',
            id: 'projects',
            children: [
              { topic: '고객센터 채팅 솔루션 개발 및 구축', id: 'project1' },
              { topic: '고객센터 지식관리 솔루션 개발 및 구축', id: 'project2' },
              { topic: '고객센터 감성분석 솔루션 구축', id: 'project3' }
            ]
          },
          {
            topic: '역할 및 기여',
            id: 'roles',
            children: [
              { topic: 'PL / 개발 리더', id: 'pl' },
              { topic: '설계 및 리뷰', id: 'design' },
              { topic: '성능 개선', id: 'performance' },
              { topic: '보안 강화', id: 'security' }
            ]
          },
          {
            topic: '문제 해결 / 성과',
            id: 'solution',
            children: [
              { topic: '트래픽 병목 해결', id: 'bottleneck' }, //인덱스 추가
              { topic: '성능 개선', id: 'solution1' }, //디바운스
              { topic: '장애 대응', id: 'issuefix' },
              { topic: '테스트 자동화', id: 'testauto' }
            ]
          },
          {
            topic: '성장 경험',
            id: 'growth',
            children: [
              { topic: '사이드 공부 (아키텍처 등)', id: 'study' },
              { topic: '자격증 (정보처리기사 등)', id: 'cert' },
              { topic: '스터디/컨퍼런스 참여', id: 'studygroup' }
            ]
          },
          {
            topic: '협업 경험',
            id: 'collab',
            children: [
              { topic: '기획/디자인 협업', id: 'design' },
              { topic: 'Notion, Slack 등 도구', id: 'tools' }
            ]
          },
          {
            topic: '향후 목표',
            id: 'goal',
            children: [
              { topic: '아키텍처 설계 능력 강화', id: 'arch' },
              { topic: '대용량 트래픽 처리 기술', id: 'scale' }
            ]
          }
        ]
      },
      linkData: {},
    };

    mind.init(data);

    /**
     * selectNode	노드를 클릭했을 때
       expandNode	노드를 펼쳤을 때
       collapseNode	노드를 접었을 때
       finishEdit	노드 텍스트 수정을 마쳤을 때
       operation	노드 추가/삭제/이동 등 조작 시
     **/
    mind.addEventListener(event => {
      if (event.name === 'selectNode') {
        const node = event.data;
        console.log('클릭한 노드:', node);
        alert(`"${node.topic}" 노드를 클릭했어요!`);
      }
    });
  </script>
</body>
</html>
